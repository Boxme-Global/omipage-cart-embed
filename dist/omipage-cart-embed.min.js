"use strict";class Item{constructor(t,a,e,i,r,s){this.sku=t,this.name=a,this.price=e,this.discounted_price=e,this.image=r,this.quantity=s}total_amount(){return self.quantity*self.price}increase_quantity(t=1){this.quantity+=t}}class Cart{constructor(){this.items=[],this.load_cart_from_storage()}add_item_to_cart(t){var a=this.find(t.sku);if(!a)return this.items.push(t),void this.save_cart();var e=this.items.indexOf(a);a.increase_quantity(t.quantity),this.items[e]=a,this.save_cart()}find(t){return this.items.find((a=>a.sku==t))}total_quantity(){var t=0;return this.items.forEach(((a,e)=>{t+=a.quantity})),t}has(t){return null!=this.find(t)}clear_cart(){this.items=[],this.save_cart()}save_cart(){window.localStorage.setItem("omp_cart",JSON.stringify(this.items)),document.dispatchEvent(new CustomEvent("cart_changed",{bubbles:!0},{detail:"Event change cart"}))}load_cart_from_storage(){this.items=[];var t=JSON.parse(window.localStorage.getItem("omp_cart"));if(t)for(var a in t){var e=new Item(t[a].sku,t[a].name,Number(t[a].price),Number(t[a].discounted_price),t[a].image,Number(t[a].quantity));this.items.push(e)}}}cart=new Cart,document.addEventListener("cart_changed",(t=>{cart_quantity_els=document.querySelectorAll('[data-cart-quantity="true"]'),cart_quantity_els.length>0&&(cart_quantity_els[0].innerHTML=cart.total_quantity())})),add_to_cart_btns=document.querySelectorAll('[data-action="add_to_cart"]');var i,add_to_cart_handler=function(t){var a,e,i,r,s,n,c=this;a=c.getAttribute("data-name"),e=c.getAttribute("data-sku"),i=Number(c.getAttribute("data-quantity")),r=Number(c.getAttribute("data-price")),s=Number(c.getAttribute("data-discounted-price")),n=c.getAttribute("data-image"),c.getAttribute("data-append-to-cart"),item=new Item(e,a,r,s,n,i),cart.add_item_to_cart(item)};for(i=0;i<add_to_cart_btns.length;i++)add_to_cart_btns[i].addEventListener("click",add_to_cart_handler);
